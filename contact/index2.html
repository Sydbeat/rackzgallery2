<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rackz Gallery - Shop</title>
  <link rel="icon" sizes="auto" href="../assets/logo.svg">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
    }
  </style>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NG984MWYM8"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-NG984MWYM8');
  </script>

  <script>
    const alert = (msg, icon) => {
      const div = document.createElement('div');
      div.setAttribute('id', 'feedback');
      const i = document.createElement('i');
      i.classList.add = icon;
      div.appendChild(i);
      const p = document.createElement('p');
      p.innerHTML = msg;
      div.appendChild(p);
      return div;
    }

    const submit = async e => {
      e.preventDefault();
      const data = {
        email_address: e.target.email_address.value,
        subject: e.target.subject.value,
        msg: e.target.msg.value,
        status: e.target.status.checked
      }
      const url = 'https://ipfs.lateralthink.club/mailchimp/rackz/msg';
      const opts = {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      }
      const resp = await fetch(url, opts);
      if (resp.ok) {
        e.target.prepend(alert('Message received', 'fa-regular fa-circle-check'));
        setTimeout(() => {
          document.getElementById('feeback').remove();
        }, 10000);

        e.target.email_address.value = '';
        e.target.subject.value = '';
        e.target.msg.value = '';
      } else {
        console.log(await resp.json())
      }
    }

    window.addEventListener('load', () => {
      const form = document.getElementById("contact");
      form.addEventListener("submit", submit);
    });
  </script>
</head>

<body>
  <main class="flex gap-10 p-20 h-screen">
    <div class="bg-grey-200">
      <a href="/">
        <img src="../assets/logo.svg" alt="Rackz Gallery" width="100px" class="bg-black mb-10">
      </a>
    </div>
    <div class="grow flex flex-col justify-start items-center">
      <menu class="text-xs flex uppercase py-4 border-b border-b-black mt-10 mb-12">
        <li class="pr-5">
          <a href="/shop">Shop</a>
        </li>
        <li class="px-5">
          <a href="/23lookbook">'23 Look book</a>
        </li>
        <li class="px-5">
          <a href="/media">Media</a>
        </li>
        <li class="px-5">
          <a href="/team">Team</a>
        </li>
        <li class="px-5">
          <a href="/virtualgallery">Virtual gallery</a>
        </li>
        <li class="px-5">
          <a href="/about">About</a>
        </li>
        <li class="pl-5 font-bold">
          <a href="/contact">Contact</a>
        </li>
      </menu>
      <form id="contact" class="w-1/2">
        <div class="field mb-6">
          <label for="email_address" class="block text-sm">Email</label>
          <input id="email_address" type="email" class="border-b border-b-gray-400 w-full px-4 pt-2 outline-none">
        </div>
        <div class="field mb-6">
          <label for="subject" class="block text-sm">Subject</label>
          <input id="subject" type="text" class="border-b border-b-gray-400 w-full px-4 pt-2 outline-none">
        </div>
        <div class="field mb-6">
          <label for="msg" class="block text-sm">Message</label>
          <textarea id="msg"rows="10" class="border-b border-b-gray-400 w-full px-4 pt-2 outline-none"></textarea>
        </div>
        <div class="flex justify-between items-center">
          <div class="field">
            <label class="cursor-pointer">
              <span>Join our newsletter</span>
              <input id="status" type="checkbox" checked />
            </label>
          </div>
          <button type="submit" class="hover:text-gray-500 hover:bg-gray-200 px-2 py-2">
            Send message
          </button>
        </div>
      </form>
    </div>
  </main>
</body>

</html>